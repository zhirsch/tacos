# -*- mode: python -*-
Import('env')

# Create the SCons environment.
env = env.Clone(
    CC = 'toolchain/install/bin/i686-pc-tacos-gcc',
    STRIP = 'toolchain/install/bin/i686-pc-tacos-strip',
    CCFLAGS = [
        '-Wall',
        '-Wextra',
        '-Werror',
        '-Wno-unused-parameter',
        '-Wdeclaration-after-statement',
        '-fno-exceptions',
        '-fno-omit-frame-pointer',
        '-std=c99',
        '-pedantic',
        '-gstabs+',
        '-g3',
        '-O0' if env['T'] == 'debug' else '-O2',
    ],
)

# Compile the sources.
binaries = env.SConscript(
    dirs = [
        'bss',
        'dummy',
        'env',
        'hello',
        'perm',
    ],
    exports = [
        'env',
    ],
)

Return(['binaries'])
